Адреса серверов:

ЦС:
http://62.168.226.38:7599/kabmat/hs/bonus/

Монтерская:
http://5.189.52.158:8080/kabmat/hs/bonus /

Авторизация base64
Логин: track
Пароль:     

Для всех методов есть служебный параметр «debug1c»
Если в запрос добавить этот параметр(значение не важно), то в ответе придет полный текст запроса, поступившего в 1С
Пример:
http://62.168.226.38:7599/kabmat/hs/bonus/getclient?phone=(953) 040-44-04&barcode=7000000690228&debug1c=

Ответ:
HTTPМетод: GET
БазовыйURL: http://62.168.226.38:7599/testbd/hs/bonus
ОтносительныйURL: /getclient
Заголовки:
Authorization: Basic dHJhY2s6NTZxdHA3
Cache-Control: no-cache
Content-Length: 0
redirect: follow
Content-Type: application/json
Accept-Encoding: gzip, deflate, br
Connection: keep-alive
Postman-Token: 7b0311aa-aaf7-4a02-af56-229bfa77b737
User-Agent: PostmanRuntime/7.26.3
Accept: */*
Host: 62.168.226.38:7599

параметрыURL:
ПараметрыЗапроса:
phone: (953) 040-44-04
barcode: 7000000690228
debug1c:
ТелоЗапроса:
Описание методов:
1)      Метод идентификации клиента GET – getclient
Параметры:
Phone – номер телефона в произвольном формате
Barcode – штрих код карты
Пример:    getclient?phone=(953) 040-44-04&barcode=7000000690228

Ответ:
Клиент + карта найдены:
{
"Code1C": "КУ0004334",
"Success": "Додонова Галина Васильевна"
}

Клиент + карта не найдены:
{
"Error": "Бонусная карта не найдена"
}

2)      Метод получения информации по бонусам GET - getbonus
Параметры:
Phone – номер телефона в произвольном формате
Barcode – штрих код карты
Date – дата, на которую необходимо получить бонусы – не обязательный параметр. Если не указан, данные возвращаются на текущую дату.
Формат даты год-месяц-день(гггг-мм-дд) , символ «-» можно заменить любым другим символом, т.е. варианты 2020-09-24, 2020:09:24, 2020.09.24 – обработаются корректно
Пример:    getbonus?phone=(953) 040-44-04&barcode=7000000690228&date=2020-09-24
Ответ:
Клиент + карта найдены:
{
"BonusGift": 0,
"BonusAvailable": 196.46,
"Bonuses": {
"12.08.2020": 249.25,
"10.08.2020": 196.46
},
"Success": "2020-08-10T00:00:00", - здесь указана дата, на которую показана информация по бонусам
"BonusAccrued": 249.25,
"Description": [
"BonusAccrued - общая сумма начисленных бонусов за покупки",
"BonusAvailable - доступные бонусы к списанию на дату запроса, без учета подарочных бонусов",
"BonusGift - доступные бонусы к списанию на дату запроса подарочные бонусы",
"Bonuses - даты активации бонусов, начиная с указанной даты будет доступно к списанию, указанное количество бонусов"
]

Клиент + карта не найдены:
{
"Error": "Бонусная карта не найдена"
}

3)      Метод получения информации по реферальным бонусам GET -  getreferralbonus

Параметры:
Phone – номер телефона в произвольном формате
Barcode – штрих код карты
Пример:    getreferralbonus?phone=+7 (953) 604-31-34&barcode=7000001291240
Ответ:
Клиент + карта найдены:
{
"Success": [
{
"bonus": 19.8, - количество зачисленных бонусов, если число отрицательное, то бонусы были аннулированы из-за возврата покупки.
"date": "2020-09-25T18:14:49" – дата зачисления/аннулирования бонусов
},
{
"bonus": 89.82,
"date": "2020-09-24T14:53:43"
},
{
"bonus": 325.62,
"date": "2020-09-24T13:57:54"
}]
}             
Клиент + карта не найдены:
{
"Error": "Бонусная карта не найдена"
}

4)      Метод зачисления бонусов GET -  givebonus
Бонусы будут доступны к списанию после 14 дней с момента зачисления.
Параметры:
Phone – номер телефона в произвольном формате
Barcode – штрих код карты
Bonus - количество бонусов для зачисления
Пример: givebonus?phone=(953) 040-44-04&barcode=7000000690228&bonus=100
Ответ:
Успешно зачислены:
{
"Success": ""
}
Ошибка:
{
"Error": "Бонусная карта не найдена"
}